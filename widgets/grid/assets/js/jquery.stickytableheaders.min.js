(function(e,t,n){"use strict";function s(n,s){var o=this;o.$el=e(n);o.el=n;o.$el.bind("destroyed",e.proxy(o.teardown,o));o.$window=e(t);o.$clonedHeader=null;o.$originalHeader=null;o.isCloneVisible=false;o.leftOffset=null;o.topOffset=null;o.init=function(){o.options=e.extend({},i,s);o.$el.each(function(){var t=e(this);t.css("padding",0);o.$originalHeader=e("thead:first",this);o.$clonedHeader=o.$originalHeader.clone();if(e("tr.filters",o.$clonedHeader).length){e("tr.filters",o.$clonedHeader).remove();e("th",o.$originalHeader).each(function(t){var n=e(this);var r=e("th",o.$originalHeader).eq(t);n.css("width",r.width())})}o.$clonedHeader.addClass("tableFloatingHeader");o.$clonedHeader.css({position:"fixed",top:0,"z-index":1,display:"none","background-color":"#fff"});o.$originalHeader.addClass("tableFloatingHeaderOriginal");o.$originalHeader.after(o.$clonedHeader);e("th",o.$clonedHeader).on("click."+r,function(t){var n=e("th",o.$clonedHeader).index(this);e("th",o.$originalHeader).eq(n).click()});t.on("sortEnd."+r,o.updateWidth)});o.updateWidth();o.toggleHeaders();o.bind()};o.destroy=function(){o.$el.unbind("destroyed",o.teardown);o.teardown()};o.teardown=function(){e.removeData(o.el,"plugin_"+r);o.unbind();o.$clonedHeader.remove();o.$originalHeader.removeClass("tableFloatingHeaderOriginal");o.$originalHeader.css("visibility","visible");o.el=null;o.$el=null};o.bind=function(){o.$window.on("scroll."+r,o.toggleHeaders);o.$window.on("resize."+r,o.toggleHeaders);o.$window.on("resize."+r,o.updateWidth)};o.unbind=function(){o.$window.off("."+r,o.toggleHeaders);o.$window.off("."+r,o.updateWidth);o.$el.off("."+r);o.$el.find("*").off("."+r)};o.toggleHeaders=function(){o.$el.each(function(){var t=e(this);var n=isNaN(o.options.fixedOffset)?o.options.fixedOffset.height():o.options.fixedOffset;var r=t.offset();var i=o.$window.scrollTop()+n;var s=o.$window.scrollLeft();var u=null;if(i>r.top&&i<r.top+t.height()){var a=r.left-s;if(o.isCloneVisible&&a===o.leftOffset&&n===o.topOffset){return}o.updateWidth();u=e("tr.filters",o.$originalHeader);if(u.length){u.insertAfter(o.$clonedHeader.children().eq(0))}o.$clonedHeader.css({top:n,"margin-top":0,left:a,display:"block"});o.$originalHeader.css("visibility","hidden");o.isCloneVisible=true;o.leftOffset=a;o.topOffset=n}else if(o.isCloneVisible){u=e("tr.filters",o.$clonedHeader);o.$clonedHeader.css("display","none");if(u.length){u.insertAfter(o.$originalHeader.children().eq(0))}o.$originalHeader.css("visibility","visible");o.isCloneVisible=false}})};o.updateWidth=function(){e("th",o.$clonedHeader).each(function(t){var n=e(this);var r=e("th",o.$originalHeader).eq(t);this.className=r.attr("class")||"";n.css("width",r.width())});o.$clonedHeader.css("width",o.$originalHeader.width())};o.init()}var r="stickyTableHeaders";var i={fixedOffset:0};e.fn[r]=function(t){return this.each(function(){var n=e.data(this,"plugin_"+r);if(n){if(typeof t==="string"){n[t].apply(n)}}else if(t!=="destroy"){e.data(this,"plugin_"+r,new s(this,t))}})}})(jQuery,window)
